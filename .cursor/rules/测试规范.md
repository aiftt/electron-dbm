# 测试规范

## 单元测试

1. 所有关键业务逻辑必须编写单元测试
2. 测试用例应包含正常情况、边界条件和异常情况
3. 测试应该是独立的，不依赖于其他测试的执行顺序
4. 每个测试用例应该只测试一个功能点
5. 测试覆盖率目标：关键模块 80%，一般模块 60%
6. 测试文件命名格式：`原文件名.test.ts` 或 `原文件名.spec.ts`

## 集成测试

1. 针对关键功能流程编写集成测试
2. 集成测试应涵盖主要用户操作路径
3. 数据库操作相关的功能必须进行集成测试
4. 使用测试数据库环境，避免污染生产数据
5. 测试完成后清理测试数据，保持环境干净

## 端到端测试

1. 核心用户场景必须有端到端测试
2. 测试应模拟真实用户操作，包括点击、输入等
3. 端到端测试应该尽可能使用稳定的选择器
4. 添加适当的等待和超时机制，处理异步操作
5. 端到端测试失败时提供明确的错误信息和截图

## 测试实践

1. 持续集成环境中必须运行所有测试
2. 提交代码前必须通过相关测试
3. 测试代码也需要进行代码审查
4. 不得因测试临时失败而忽略测试
5. 测试用例应该易于理解和维护

## 性能测试

1. 关键功能需要进行性能基准测试
2. 数据库查询操作需要进行性能测试，确保查询效率
3. 大数据集处理功能需要测试内存占用情况
4. 测试应包含常规负载和峰值负载场景
5. 性能回退必须被记录并解决
