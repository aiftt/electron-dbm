# 数据库操作规则

## 查询规则

1. 所有 SQL 关键字使用大写（如 SELECT, FROM, WHERE 等）
2. 表名和字段名使用小写，多个单词用下划线连接
3. 复杂查询应当分行编写，每个主要子句（SELECT, FROM, WHERE, GROUP BY 等）独占一行
4. 查询条件应当使用参数化查询，避免 SQL 注入风险
5. 生产环境中的查询必须设置超时限制
6. 大型查询必须有注释说明其用途和预期结果

## 连接管理

1. 数据库连接信息不得硬编码在代码中，必须从配置文件或环境变量中读取
2. 生产环境中的连接信息必须加密存储
3. 所有连接必须有超时机制
4. 使用连接池管理数据库连接，避免频繁建立和断开连接
5. 连接失败需要有适当的重试机制，重试次数不超过 3 次

## 事务处理

1. 改变数据的操作必须使用事务
2. 事务应当尽可能小且简短，避免长时间持有锁
3. 必须处理事务失败的情况，提供回滚机制
4. 嵌套事务应当避免，如必须使用请明确说明其传播行为

## 数据导入导出

1. 大批量数据操作应当使用批处理
2. 导入导出功能必须提供进度指示和取消选项
3. 导出数据必须提供格式选择（如 CSV、SQL、JSON 等）
4. 导入前必须验证数据格式和完整性
5. 敏感数据导出时需要提供加密选项
